{% extends 'auction_store/base.html' %}
{% block content %}
{% load static %}
{% load crispy_forms_tags %}
{% load crispy_forms_field %}
<div class="container-fluid mt-2"><!-- container -->
<div class="row">

 <div class="col-12 col-lg-3 mt-2 mb-5 px-5 ">
  <div class="row bg-primary p-3">
  <form action="" method="GET">
    {% csrf_token %}
    <div class="form-row">
      <div class="form-group col-12 font-weight-bold text-white mb-0">
        {{ filter.form.category|as_crispy_field }}
      </div>
      <div class="form-group col-12 font-weight-bold text-white mb-0">
       {{ filter.form.price|as_crispy_field }}
      </div>
      <div class="form-group col-12 font-weight-bold text-white mb-0">
        {{ filter.form.format|as_crispy_field }}
      </div>
      <div class="form-group col-12 font-weight-bold text-white mb-0">
        {{ filter.form.sort|as_crispy_field }}
      </div>
    </div>
    <button class="btn btn-warning col-6 offset-3 mt-2"
    type="submit">Search</button>
  </form>
</div>
 </div>

<div class="col-12 col-lg-9 px-0">
 {% for item in filter.qs %}
 <div class="row card-row my-1">
  <div class="col-12 col-lg-4 p-0">
    {% if item.sold %}
    <img class="layered-image img-fluid" src="{{ item.image.url }}">
    <img class="image-overlay-store img-fluid" src="{% static 'img/soldd.png' %}">
    {% elif not item.sold and item.today_date <= item.finish_date %}
    <img class="image-time-store img-fluid" src="{% static 'img/hammer.png' %}">
    <img class="layered-image img-fluid" src="{{ item.image.url }}">
    {% else %}
    <img class="layered-image img-fluid" src="{{ item.image.url }}">
    {% endif %}
  </div>
  <div class="col-12 col-lg-8 p-0">
   <div class="card h-100 text-center border border-white">
    <div class="card-header py-1 bg-muted">
    <h5 class="card-title m-0">
      <a href="{% url 'item-detail' item.id %}">{{ item.name }}</a>
      {% if not item.sold and item.today_date <= item.finish_date %}
      <i class="fas fa-hourglass-half auction_lasts pl-1 text-secondary"></i>
      {% elif not item.sold and item.today_date >= item.finish_date%}
      <i class="far fa-times-circle auction_lasts pl-1 text-secondary"></i>
      {% endif %}
    </h5>
   </div>
   <div class="card-body">
    <div class="col-12 py-1">
      <p class="text-left m-auto">{{ item.desc }}</p>
    </div>
   </div>
   <div class="card-footer text-muted p-0">
    Last Bid: {{ item.start_date }}
   </div>
   </div>
  </div>
 </div>
 {% endfor %}
</div><!-- col-8 -->

</div><!-- row -->
</div><!-- container -->
<script>
  var euroSign = document.getElementById('id_price');
  euroSign.setAttribute("placeholder", "EURO");;
</script>
{% endblock %}


